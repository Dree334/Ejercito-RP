<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Colombia Wars RP ‚Äî Panel de Mando</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Exo+2:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,700&family=Share+Tech+Mono&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
:root {
  --col:#0033a0;
  --col2:#ce1126;
  --col3:#fcd116;
  --ink:#0a0e1a;
  --ink2:#111624;
  --g100:rgba(255,255,255,.07);
  --g200:rgba(255,255,255,.12);
  --g300:rgba(255,255,255,.2);
  --g500:rgba(255,255,255,.45);
  --g700:rgba(255,255,255,.75);
  --glow-b:0 0 40px rgba(0,51,160,.4);
  --glow-y:0 0 40px rgba(252,209,22,.3);
}
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body {
  background:var(--ink);
  color:white;
  font-family:'Exo 2',sans-serif;
  -webkit-font-smoothing:antialiased;
  overflow-x:hidden;
  min-height:100vh;
}

/* ‚îÄ‚îÄ BACKGROUND ‚îÄ‚îÄ */
.bg-field {
  position:fixed;inset:0;z-index:0;
  background: radial-gradient(ellipse 80% 60% at 50% 0%, rgba(0,40,130,.5) 0%, transparent 70%),
              radial-gradient(ellipse 50% 40% at 80% 80%, rgba(206,17,38,.12) 0%, transparent 60%),
              linear-gradient(160deg, #05091a 0%, #0a0e1a 50%, #0e0613 100%);
}
.bg-grid {
  position:fixed;inset:0;z-index:0;
  background-image:
    linear-gradient(rgba(0,51,160,.08) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,51,160,.08) 1px, transparent 1px);
  background-size:44px 44px;
  mask-image: radial-gradient(ellipse 100% 80% at 50% 50%, black 40%, transparent 100%);
}
.bg-noise {
  position:fixed;inset:0;z-index:0;opacity:.018;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* ‚îÄ‚îÄ COLOMBIA STRIPE ‚îÄ‚îÄ */
.col-stripe {
  position:fixed;top:0;left:0;right:0;height:5px;z-index:999;
  background:linear-gradient(90deg,#fcd116 33.3%,#003893 33.3% 66.6%,#ce1126 66.6%);
}

/* ‚îÄ‚îÄ TOP BAR ‚îÄ‚îÄ */
.topbar {
  position:fixed;top:5px;left:0;right:0;z-index:200;
  height:58px;
  background:rgba(10,14,26,.85);
  backdrop-filter:blur(20px);
  border-bottom:1px solid rgba(255,255,255,.06);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 40px;gap:20px;
}
.tb-logo { display:flex;align-items:center;gap:12px;text-decoration:none; }
.tb-flag { display:flex;flex-direction:column;width:32px;height:22px;border-radius:4px;overflow:hidden;box-shadow:0 2px 8px rgba(0,51,160,.4);flex-shrink:0; }
.tb-flag .fy{flex:1;background:#fcd116;} .tb-flag .fb{flex:2;background:#003893;} .tb-flag .fr{flex:1;background:#ce1126;}
.tb-brand { font-family:'Rajdhani',sans-serif;font-size:.95rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:white; }
.tb-brand span { color:#fcd116; }
.tb-sub { font-family:'Share Tech Mono',monospace;font-size:.5rem;color:rgba(255,255,255,.3);letter-spacing:.1em;display:block;margin-top:1px; }
.tb-status { display:flex;align-items:center;gap:7px;font-family:'Share Tech Mono',monospace;font-size:.6rem;color:#4ade80;letter-spacing:.08em; }
.tb-dot { width:7px;height:7px;border-radius:50%;background:#4ade80;animation:pdot 2s ease infinite; }
@keyframes pdot{0%,100%{box-shadow:0 0 0 0 rgba(74,222,128,.5)}50%{box-shadow:0 0 0 6px rgba(74,222,128,0)}}

/* ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ */
.page {
  position:relative;z-index:1;
  min-height:100vh;
  display:flex;align-items:center;justify-content:center;
  padding:80px 20px 40px;
}

.page-inner {
  width:100%;max-width:1100px;
  display:grid;grid-template-columns:1fr 1fr;
  gap:0;
  background:rgba(8,12,28,.7);
  border:1px solid rgba(255,255,255,.07);
  border-radius:24px;
  overflow:hidden;
  box-shadow:0 40px 120px rgba(0,0,0,.6), 0 0 0 1px rgba(0,51,160,.15);
  backdrop-filter:blur(16px);
}

/* ‚îÄ‚îÄ LEFT PANEL (FLAG & HERO) ‚îÄ‚îÄ */
.left-panel {
  background:linear-gradient(160deg, #001040 0%, #003893 60%, #001835 100%);
  padding:50px 44px;
  display:flex;flex-direction:column;justify-content:space-between;
  position:relative;overflow:hidden;
}
.left-panel::before {
  content:"";position:absolute;inset:0;
  background-image:repeating-linear-gradient(45deg,rgba(255,255,255,.025) 0,rgba(255,255,255,.025) 1px,transparent 1px,transparent 22px),
                   repeating-linear-gradient(-45deg,rgba(255,255,255,.025) 0,rgba(255,255,255,.025) 1px,transparent 1px,transparent 22px);
}
.left-panel::after {
  content:"";position:absolute;bottom:0;left:0;right:0;height:4px;
  background:linear-gradient(90deg,#fcd116 33.3%,#003893 33.3% 66.6%,#ce1126 66.6%);
}

.lp-top { position:relative;z-index:1; }
.lp-tag { font-family:'Share Tech Mono',monospace;font-size:.58rem;letter-spacing:.16em;text-transform:uppercase;color:rgba(255,255,255,.3);margin-bottom:20px; }
.lp-title { font-family:'Bebas Neue',sans-serif;font-size:3rem;line-height:.95;color:white;letter-spacing:.04em;margin-bottom:8px; }
.lp-title span { color:#fcd116; }
.lp-sub { font-family:'Rajdhani',sans-serif;font-size:.8rem;font-weight:600;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.4);margin-bottom:24px; }

/* ‚îÄ‚îÄ WAVING FLAG ‚îÄ‚îÄ */
.flag-stage {
  position:relative;z-index:1;
  margin:24px 0;
  perspective:600px;
}
.flag-pole {
  position:absolute;left:0;top:0;bottom:0;
  width:4px;background:linear-gradient(180deg,#c8a96e,#8a6a30,#c8a96e);
  border-radius:2px;z-index:5;
  box-shadow:2px 0 6px rgba(0,0,0,.4);
}
.flag-pole::before {
  content:"‚òÖ";position:absolute;top:-18px;left:50%;transform:translateX(-50%);
  font-size:14px;color:#fcd116;text-shadow:0 0 8px rgba(252,209,22,.6);
}
.flag-wrap {
  margin-left:10px;
  width:200px;height:120px;
  overflow:hidden;
  position:relative;
}
.flag-canvas {
  width:240px;height:120px;
  display:flex;flex-direction:column;
  transform-origin:left center;
  animation:flagWave 2.2s ease-in-out infinite;
}
@keyframes flagWave {
  0%   { transform:rotateY(0deg) skewY(0deg); }
  15%  { transform:rotateY(-6deg) skewY(1.5deg); }
  30%  { transform:rotateY(0deg) skewY(0deg); }
  45%  { transform:rotateY(5deg) skewY(-1deg); }
  60%  { transform:rotateY(0deg) skewY(0deg); }
  75%  { transform:rotateY(-4deg) skewY(1deg); }
  100% { transform:rotateY(0deg) skewY(0deg); }
}
.flag-y { flex:1;background:linear-gradient(90deg,#d4a000,#fcd116,#d4a000);position:relative; }
.flag-b { flex:2;background:linear-gradient(90deg,#002070,#003893,#002070);position:relative;display:flex;align-items:center;justify-content:center; }
.flag-r { flex:1;background:linear-gradient(90deg,#a00020,#ce1126,#a00020);position:relative; }

/* Coat of arms simplified */
.escudo {
  width:36px;height:36px;border-radius:50%;
  background:radial-gradient(circle,rgba(252,209,22,.3),rgba(0,56,147,.4));
  border:2px solid rgba(252,209,22,.5);
  display:flex;align-items:center;justify-content:center;
  font-size:18px;
  box-shadow:0 0 12px rgba(252,209,22,.3);
}

/* Flag sheen */
.flag-sheen {
  position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,.15) 0%,transparent 40%,rgba(0,0,0,.1) 100%);
  pointer-events:none;z-index:2;
  animation:sheen 2.2s ease-in-out infinite;
}
@keyframes sheen {
  0%,100% { opacity:.6; }
  50% { opacity:.2; }
}

/* shadow under flag */
.flag-shadow {
  width:160px;height:8px;
  background:radial-gradient(ellipse,rgba(0,0,0,.4),transparent 70%);
  margin-left:10px;margin-top:-4px;
}

/* stats mini */
.lp-stats {
  position:relative;z-index:1;
  display:flex;gap:0;
  border:1px solid rgba(255,255,255,.1);
  border-radius:10px;overflow:hidden;
  margin-top:18px;
}
.lps { flex:1;text-align:center;padding:14px 8px;border-right:1px solid rgba(255,255,255,.1); }
.lps:last-child { border-right:none; }
.lps-n { font-family:'Bebas Neue',sans-serif;font-size:1.6rem;color:#fcd116;line-height:1; }
.lps-l { font-family:'Share Tech Mono',monospace;font-size:.48rem;letter-spacing:.09em;color:rgba(255,255,255,.35);text-transform:uppercase;margin-top:2px; }

.lp-credit {
  position:relative;z-index:1;
  margin-top:20px;
  display:flex;align-items:center;gap:8px;
  padding:10px 14px;
  background:rgba(252,209,22,.06);
  border:1px solid rgba(252,209,22,.15);
  border-radius:8px;
}
.lp-credit-icon { font-size:16px; }
.lp-credit-text { font-family:'Share Tech Mono',monospace;font-size:.56rem;color:rgba(255,255,255,.35);letter-spacing:.07em;line-height:1.5; }
.lp-credit-text strong { color:rgba(252,209,22,.8);display:block;font-size:.6rem; }

/* ‚îÄ‚îÄ RIGHT PANEL (AUTH) ‚îÄ‚îÄ */
.right-panel {
  padding:50px 44px;
  background:rgba(6,9,22,.6);
  position:relative;overflow:hidden;
  display:flex;flex-direction:column;
}

/* TAB SWITCHER */
.auth-tabs {
  display:flex;gap:4px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.07);
  border-radius:10px;
  padding:4px;
  margin-bottom:32px;
}
.auth-tab {
  flex:1;padding:10px;
  font-family:'Rajdhani',sans-serif;font-size:.82rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;
  color:rgba(255,255,255,.35);
  background:none;border:none;cursor:pointer;
  border-radius:7px;
  transition:all .25s;
}
.auth-tab.active {
  background:var(--col);color:white;
  box-shadow:0 4px 16px rgba(0,51,160,.35);
}
.auth-tab:not(.active):hover { color:rgba(255,255,255,.6);background:rgba(255,255,255,.04); }

/* FORMS */
.auth-form { display:none;flex-direction:column;gap:18px; }
.auth-form.visible { display:flex; }
.form-title { font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:.06em;color:white;line-height:1;margin-bottom:4px; }
.form-title span { color:#fcd116; }
.form-sub { font-family:'Share Tech Mono',monospace;font-size:.58rem;letter-spacing:.1em;color:rgba(255,255,255,.3);text-transform:uppercase;margin-bottom:8px; }

.field-group { display:flex;flex-direction:column;gap:6px; }
.field-group.half-grid { display:grid;grid-template-columns:1fr 1fr;gap:12px; }
.field-label {
  font-family:'Rajdhani',sans-serif;font-size:.68rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;
  color:rgba(255,255,255,.35);
  display:flex;align-items:center;gap:6px;
}
.field-label .fl-icon { font-size:.75rem; }

.field-input {
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.1);
  border-radius:8px;
  padding:11px 14px;
  color:white;
  font-family:'Exo 2',sans-serif;font-size:.85rem;
  outline:none;
  transition:border-color .2s, box-shadow .2s, background .2s;
  width:100%;
}
.field-input::placeholder { color:rgba(255,255,255,.2);font-size:.8rem; }
.field-input:focus {
  border-color:rgba(0,51,160,.7);
  background:rgba(0,51,160,.08);
  box-shadow:0 0 0 3px rgba(0,51,160,.2);
}

/* Submit button */
.btn-submit {
  width:100%;padding:14px;
  background:linear-gradient(135deg,#003893,#0044c0);
  border:1px solid rgba(0,56,147,.5);
  border-radius:9px;
  color:white;
  font-family:'Rajdhani',sans-serif;font-size:.9rem;font-weight:700;letter-spacing:.12em;text-transform:uppercase;
  cursor:pointer;
  transition:all .25s;
  position:relative;overflow:hidden;
  display:flex;align-items:center;justify-content:center;gap:8px;
  box-shadow:0 4px 20px rgba(0,51,160,.3);
  margin-top:4px;
}
.btn-submit::before {
  content:"";position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,.1),transparent);
}
.btn-submit:hover { transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,51,160,.45);background:linear-gradient(135deg,#0044c0,#0055e0); }
.btn-submit:disabled { opacity:.5;cursor:not-allowed;transform:none; }

/* Message */
.msg-box {
  padding:12px 16px;
  border-radius:8px;
  font-family:'Rajdhani',sans-serif;font-size:.82rem;font-weight:600;letter-spacing:.04em;
  display:none;align-items:center;gap:9px;
  animation:fadeIn .3s ease;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
.msg-box.show{display:flex;}
.msg-box.ok{background:rgba(74,222,128,.1);border:1px solid rgba(74,222,128,.25);color:#4ade80;}
.msg-box.err{background:rgba(206,17,38,.1);border:1px solid rgba(206,17,38,.25);color:#ff6b6b;}
.msg-box.info{background:rgba(0,51,160,.12);border:1px solid rgba(0,51,160,.3);color:#93c5fd;}

/* Divider */
.auth-divider {
  display:flex;align-items:center;gap:12px;margin:4px 0;
}
.auth-divider::before,.auth-divider::after{content:"";flex:1;height:1px;background:rgba(255,255,255,.08);}
.auth-divider-txt{font-family:'Share Tech Mono',monospace;font-size:.55rem;letter-spacing:.1em;color:rgba(255,255,255,.2);text-transform:uppercase;}

.btn-logout{
  background:none;border:1px solid rgba(255,255,255,.1);color:rgba(255,255,255,.4);
  font-family:'Rajdhani',sans-serif;font-size:.75rem;font-weight:600;letter-spacing:.1em;text-transform:uppercase;
  padding:9px;border-radius:7px;cursor:pointer;transition:all .2s;width:100%;
}
.btn-logout:hover{border-color:rgba(206,17,38,.4);color:#ff6b6b;}

/* Responsive */
@media(max-width:820px){
  .page-inner{grid-template-columns:1fr;}
  .left-panel{padding:36px 28px;min-height:auto;}
  .flag-wrap{width:160px;}
  .right-panel{padding:36px 28px;}
}
@media(max-width:500px){
  .topbar{padding:0 16px;}
  .right-panel,.left-panel{padding:28px 20px;}
}
</style>
</head>
<body>

<div class="bg-field"></div>
<div class="bg-grid"></div>
<div class="bg-noise"></div>
<div class="col-stripe"></div>

<!-- TOP BAR -->
<div class="topbar">
  <a href="index.html" class="tb-logo">
    <div class="tb-flag"><div class="fy"></div><div class="fb"></div><div class="fr"></div></div>
    <div>
      <div class="tb-brand">Colombia <span>Wars</span> RP</div>
      <span class="tb-sub">GTA SA ¬∑ MTA ¬∑ Guerras Mundiales Roleplay</span>
    </div>
  </a>
  <div class="tb-status"><div class="tb-dot"></div>SERVIDOR MTA ONLINE</div>
</div>

<!-- ‚ïê‚ïê AUTH PAGE ‚ïê‚ïê -->
<div class="page" id="auth-page">
  <div class="page-inner">

    <!-- LEFT PANEL -->
    <div class="left-panel">
      <div class="lp-top">
        <div class="lp-tag">// GTA San Andreas ¬∑ MTA ¬∑ Roleplay</div>
        <div class="lp-title">PANEL DE<br><span>MANDO</span></div>
        <div class="lp-sub">‚öî Bando Colombia ¬∑ Guerras Mundiales RP</div>

        <!-- WAVING FLAG -->
        <div class="flag-stage">
          <div class="flag-pole"></div>
          <div class="flag-wrap">
            <div class="flag-canvas">
              <div class="flag-y"></div>
              <div class="flag-b"><div class="escudo">üõ°</div></div>
              <div class="flag-r"></div>
            </div>
            <div class="flag-sheen"></div>
          </div>
          <div class="flag-shadow"></div>
        </div>

        <div class="lp-stats">
          <div class="lps"><div class="lps-n">248</div><div class="lps-l">Soldados</div></div>
          <div class="lps"><div class="lps-n">134</div><div class="lps-l">Batallas</div></div>
          <div class="lps"><div class="lps-n">89%</div><div class="lps-l">Victorias</div></div>
        </div>
      </div>

      <!-- CREDITS -->
      <div class="lp-credit">
        <div class="lp-credit-icon">üéñ</div>
        <div class="lp-credit-text">
          <strong>Dise√±ado por Sam Sukv</strong>
          Colombia Wars RP ¬∑ Guerras Mundiales ¬∑ MTA SA ¬∑ Ficci√≥n
        </div>
      </div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="right-panel">

      <!-- TABS -->
      <div class="auth-tabs">
        <button class="auth-tab active" onclick="switchTab('login')">üîê Ingresar</button>
        <button class="auth-tab" onclick="switchTab('register')">ü™ñ Enlistarse</button>
      </div>

      <!-- MESSAGE BOX -->
      <div class="msg-box" id="msgBox"></div>

      <!-- ‚îÄ LOGIN FORM ‚îÄ -->
      <div class="auth-form visible" id="loginForm">
        <div>
          <div class="form-title">BIENVENIDO <span>SOLDADO</span></div>
          <div class="form-sub">// Accede con tus credenciales del Bando Colombia</div>
        </div>
        <div class="field-group">
          <label class="field-label"><span class="fl-icon">üìß</span>Correo Electr√≥nico</label>
          <input type="email" class="field-input" id="log_correo" placeholder="soldado@colombia-wars.rp">
        </div>
        <div class="field-group">
          <label class="field-label"><span class="fl-icon">üîí</span>Contrase√±a</label>
          <input type="password" class="field-input" id="log_password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
        <button class="btn-submit" id="btnLog" onclick="handleLogin()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          ENTRAR AL SISTEMA
        </button>
        <div class="auth-divider"><span class="auth-divider-txt">¬øPrimera vez?</span></div>
        <button class="btn-logout" onclick="switchTab('register')">ü™ñ ENLISTARSE AL BANDO COLOMBIA ‚Üí</button>
      </div>

      <!-- ‚îÄ REGISTER FORM ‚îÄ -->
      <div class="auth-form" id="registerForm">
        <div>
          <div class="form-title">ENLISTARSE EN<br><span>COLOMBIA</span></div>
          <div class="form-sub">// Reg√≠strate para defender la patria en el servidor MTA</div>
        </div>
        <div class="field-group half-grid">
          <div>
            <label class="field-label"><span class="fl-icon">üìß</span>Correo</label>
            <input type="email" class="field-input" id="reg_correo" placeholder="tu@correo.com">
          </div>
          <div>
            <label class="field-label"><span class="fl-icon">üéÆ</span>Discord</label>
            <input type="text" class="field-input" id="reg_discord" placeholder="usuario#1234">
          </div>
        </div>
        <div class="field-group">
          <label class="field-label"><span class="fl-icon">ü™ñ</span>Nombre IC (In-Character)</label>
          <input type="text" class="field-input" id="reg_nombre_ic" placeholder="Nombre de tu personaje">
        </div>
        <div class="field-group half-grid">
          <div>
            <label class="field-label"><span class="fl-icon">üåé</span>Pa√≠s</label>
            <input type="text" class="field-input" id="reg_pais" placeholder="Colombia">
          </div>
          <div>
            <label class="field-label"><span class="fl-icon">üìÖ</span>Edad</label>
            <input type="number" class="field-input" id="reg_edad" placeholder="18" min="13" max="99">
          </div>
        </div>
        <div class="field-group">
          <label class="field-label"><span class="fl-icon">üîí</span>Contrase√±a</label>
          <input type="password" class="field-input" id="reg_password" placeholder="M√≠nimo 6 caracteres">
        </div>
        <button class="btn-submit" id="btnReg" onclick="handleRegister()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 5v14M5 12h14"/></svg>
          UNIRSE AL BANDO COLOMBIA
        </button>
        <div class="auth-divider"><span class="auth-divider-txt">¬øYa tienes cuenta?</span></div>
        <button class="btn-logout" onclick="switchTab('login')">üîê INGRESAR AL SISTEMA ‚Üí</button>
      </div>

    </div>
  </div>
</div>

<script>
// ‚îÄ‚îÄ TAB SWITCHER ‚îÄ‚îÄ
function switchTab(tab) {
  document.querySelectorAll('.auth-tab').forEach((t,i)=>{
    t.classList.toggle('active', (i===0&&tab==='login')||(i===1&&tab==='register'));
  });
  document.getElementById('loginForm').classList.toggle('visible', tab==='login');
  document.getElementById('registerForm').classList.toggle('visible', tab==='register');
  clearMsg();
}

function showMsg(text, type='info') {
  const b = document.getElementById('msgBox');
  b.className = `msg-box show ${type}`;
  const icons = {ok:'‚úÖ', err:'‚ùå', info:'‚ÑπÔ∏è'};
  b.innerHTML = `<span>${icons[type]||'‚ÑπÔ∏è'}</span><span>${text}</span>`;
}
function clearMsg() {
  document.getElementById('msgBox').className = 'msg-box';
}

// ‚îÄ‚îÄ REGISTER ‚îÄ‚îÄ
async function handleRegister() {
  const correo   = document.getElementById('reg_correo').value.trim();
  const discord  = document.getElementById('reg_discord').value.trim();
  const nombre   = document.getElementById('reg_nombre_ic').value.trim();
  const pais     = document.getElementById('reg_pais').value.trim();
  const edad     = document.getElementById('reg_edad').value;
  const password = document.getElementById('reg_password').value;

  if (!correo||!discord||!nombre||!pais||!edad||!password) {
    showMsg('Completa todos los campos, Soldado.','err'); return;
  }
  if (password.length < 6) {
    showMsg('La contrase√±a debe tener al menos 6 caracteres.','err'); return;
  }

  const btn = document.getElementById('btnReg');
  btn.disabled = true;
  btn.textContent = 'PROCESANDO...';
  showMsg('Procesando enlistamiento...','info');

  const placa = "RP-" + Math.floor(Math.random()*9000+1000);
  const datos = { correo, discord, nombre_ic:nombre, pais, edad:parseInt(edad), password, placa };

  try {
    const res = await fetch('/registro', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify(datos)
    });
    if (res.ok) {
      showMsg(`¬°Bienvenido al Bando Colombia, ${nombre}! Tu placa: ${placa}`, 'ok');
      document.getElementById('registerForm').querySelectorAll('input').forEach(i=>i.value='');
      setTimeout(()=>switchTab('login'),2500);
    } else {
      const err = await res.json().catch(()=>({}));
      showMsg(err.message||'Ese correo ya est√° registrado en el sistema.','err');
    }
  } catch(e) {
    showMsg('Error de conexi√≥n con el servidor MTA.','err');
  } finally {
    btn.disabled=false; btn.innerHTML='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 5v14M5 12h14"/></svg> UNIRSE AL BANDO COLOMBIA';
  }
}

// ‚îÄ‚îÄ LOGIN ‚îÄ‚îÄ
async function handleLogin() {
  const correo   = document.getElementById('log_correo').value.trim();
  const password = document.getElementById('log_password').value;

  if (!correo||!password) {
    showMsg('Ingresa correo y contrase√±a, Soldado.','err'); return;
  }

  const btn = document.getElementById('btnLog');
  btn.disabled=true; btn.textContent='VERIFICANDO...';
  showMsg('Verificando credenciales de mando...','info');

  try {
    const res = await fetch('/login', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({correo, password})
    });
    const data = await res.json();

    if (res.ok) {
      // Guardar sesi√≥n y redirigir directo a index1.html
      sessionStorage.setItem('soldado', JSON.stringify(data));
      showMsg(`¬°Acceso concedido, ${data.nombre_ic||'Soldado'}! Redirigiendo...`, 'ok');
      setTimeout(() => {
        window.location.href = 'index1.html';
      }, 800);
    } else {
      showMsg(data.message||'Correo o contrase√±a incorrectos.','err');
      btn.disabled=false;
      btn.innerHTML='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg> ENTRAR AL SISTEMA';
    }
  } catch(e) {
    showMsg('Error de conexi√≥n con el servidor.','err');
    btn.disabled=false;
    btn.innerHTML='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg> ENTRAR AL SISTEMA';
  }
}
</script>
</body>
</html>
